<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		
		<title>Mariage</title>
		
		<link rel="stylesheet" href="ressources/custom.css" />
		<link rel="stylesheet" href="ressources/jquery-ui-1.11.4.custom/jquery-ui.min.css" />
		<link rel="stylesheet" href="ressources/bootstrap-3.3.6-dist/css/bootstrap.min.css" />
	</head>
	<body>
		<div class="container-fluid">

			<!-- Colonne gauche -->
			<div class="header col-md-3">
				<!-- Titre -->
				<div class="row text-center titre">MonMariage.net</div>
				<!-- Menu -->
				<div class="navbar navbar-default" role="navigation">
					<ul class="nav nav-pills nav-stacked">
						<li><a href="index.html">Accueil</a></li>
						<li class="active"><a href="invites.html">Invités</a></li>
					</ul>
				</div>
				<!-- Version -->
				<div class="row text-center">version 1.0.0</div>
			</div>
			
			<div class="content col-md-9">
			
				<div id="infoMariage" class="text-center">
					<h1>Gestionnaire de mariage.</h1>
					<div id="maries">Mariage de <span></span> & <span></span></div>
					<div id="date">le <span></span></div>
				</div>
			
				<table id="invites" class="table table-striped">
					<thead><tr><th>Groupe</th><th>Nom</th></thead>
					<tbody></tbody>
				</table>
				
				<div class="form">
					<form>
						<div class="form-group">
							<label for="exampleInputEmail1">Email address</label>
							<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
						</div>
						<div class="form-group">
							<label for="exampleInputPassword1">Password</label>
							<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
						</div>
						<div class="form-group">
							<label for="exampleInputFile">File input</label>
							<input type="file" id="exampleInputFile">
							<p class="help-block">Example block-level help text here.</p>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox"> Check me out
							</label>
						</div>
						<button type="submit" class="btn btn-default">Submit</button>
					</form>
				</div>
			</div>
		</div>

		<script type="application/javascript" src="ressources/jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
		<script type="application/javascript" src="ressources/jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>
		<script type="application/javascript" src="ressources/common.js"></script>
		<script type="application/javascript">
			var idMariage = "";
			$(document).ready(function() {
			
				// Redirection si pas de mariage sélectionné
				idMariage = getIdMariage();
				if (idMariage === "") {window.location.href="/";}
				
				// Chargement des données du mariage
				var req = $.get( REST_PREFIX + "/mariage/" + idMariage);
				req.success(function(dataString) {
					var data = eval(dataString);
					$("#maries span:first").html(data.marie1);
					$("#maries span:last").html(data.marie2);
					$("#date span").html(data.dateCelebration);
				});
				req.fail(function(jqXHR, textStatus, errorThrown) {ajaxFailFunctionToDisplayWarn("readyMariage");});

				// Chargement des invites
				var req = $.get( REST_PREFIX + "/mariage/" + idMariage + "/invites");
				req.success(function(dataString) {
					var data = eval(dataString);
					
					var table = $("#invites tbody"); 
					data.forEach(function(e, i, array) {
						var tr = "<tr><td>" + e.groupe + "</td><td>" + e.nom + "</td></tr>";
						table.append(tr);
					});
				});
				req.fail(function(jqXHR, textStatus, errorThrown) {ajaxFailFunctionToDisplayWarn("readyInvites");});
			});
		</script>
	</body>
</html>